# vim: ft=zsh:

# This file contains a bunch of aliases and functions which help
# streamline my workflow with taskwarrior. I try implementing the
# GTD methodology when I can help it, but I don't stick to it
# religeously. I do 'what works for me'
alias to="taskopen"

function ts() # Handles sync and git backup of taskwarrior tasks
{
    cd $HOME/.task/
    task sync
    git add .
    git commit -m "Sync and backup"
    git push origin master
    cd -
}

function in() # List 'in' tasks or add new one
{
    if [[ $1 = '' ]]; then
        task +in
    else
        task add +in $@
    fi
}

function tick() # Adds a 'tickler' (a task that won't be listed til $due)
{
    due=$1
    shift
    task add +in +tickle wait:$due $@
}

function next() # Mark a task to be actioned next (or list next actions)
{
    if [[ $1 = '' ]]; then
        task +next
    else
        task $1 mod +next
    fi
}

function pro() # List all tasks in $1 (or list all top level projects)
{
    if [[ $1 = '' ]]; then
        task projects | grep --color=NEVER '^[^ 0-9]'
    else
        task pro:$1
    fi
}


